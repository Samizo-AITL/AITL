# Chapter 2: The Three-Layer Model of AITL  
## 論理・制御・物理の統合アーキテクチャ

---

## 2.1 AITLの全体構造

AITLは、3つの設計層が緊密に連携する**階層型アーキテクチャ**に基づいています：

- **論理層（Logic Layer）**：LLMによる高次推論と命令生成
- **制御層（Control Layer）**：状態遷移とモデルベース制御による具体的動作の生成
- **物理層（Physical Layer）**：現実のセンサ/アクチュエータと環境応答

これらは**トップダウン設計**と**ボトムアップ検証**を繰り返す形で構築されます。

---

## 2.2 層ごとの役割

| 層 | 主な技術 | 機能概要 |
|----|----------|----------|
| **論理層** | LLM（ChatGPT, MiniLMなど） | 自然言語入力 → 意図解釈 → コマンド生成（例：「避けろ」→軌道変更） |
| **制御層** | Simulink / Stateflow、PID、MPC等 | 状態推定・制御則設計、命令の時系列動作への変換 |
| **物理層** | センサIF、アクチュエータ、ノイズモデル | 時間遅延、量子化誤差、外乱など現実の影響に対応した信号処理・実行 |

---

## 2.3 情報の流れと同期制御

```text
[自然言語仕様]
     ↓ (LLM推論)
[論理層] ── コマンド/命令 → [制御層]
                                ↓
                        状態遷移・フィードバック制御
                                ↓
                      センサデータ / アクチュエータ制御
                                ↓
                          [物理層（実環境）]
                                ↑
                          実信号（ノイズ、遅延）フィードバック
```
このように、上層から下層へは「意図の具体化」、下層から上層へは「現実との整合情報」が流れます。

---

## 2.4 分離と統合のバランス

AITLの三層モデルでは、各層が**機能的に分離**されていることで、専門領域ごとの独立設計が可能です。一方で、**明確なインタフェース設計**と**情報伝達の整合**により、全体として統合された挙動を実現できます。

この設計思想により、以下のような効果が得られます：

- ✅ **分業開発の効率化**：論理層・制御層・物理層をそれぞれ別の設計者が扱える  
- ✅ **モデルの再利用性**：制御アルゴリズムのみを変更して異なる用途へ展開可能  
- ✅ **形式的な検証**：各層の検証（MiL, SiL, HiL）を段階的に実施できる

---

## 2.5 モデルの教育的価値

AITLの3層構造は、教育面でも非常に有用です。各層が理論・設計・実装の異なる抽象レベルをカバーしており、以下のような学習ステップが可能です：

| 学習段階 | 対応層 | 学習内容 |
|----------|--------|----------|
| 初級 | 物理層 | センサ、アクチュエータ、信号処理の基礎 |
| 中級 | 制御層 | PID/MPC制御、状態推定、モデル設計 |
| 上級 | 論理層 | LLMによる仕様生成、自然言語推論の統合 |

さらに、PoC（Proof of Concept）においては、実際の応用例（例：SkyEdge、EcoAgriPower）を用いた演習課題がそのまま教材として利用可能です。

---

## 2.6 今後の展開

本章では、AITLの基本構造としての三層モデルを俯瞰しました。次章では、AITLの最上位に位置する**論理層（Logic Layer）**に焦点を当て、以下のような内容を扱います：

- LLM（Large Language Model）の概要と選定指針  
- 自然言語から制御仕様への変換手法  
- SoCやFPGAへのLLM組込みのアーキテクチャ例

---
