# 03_AIControlChip - 仕様書 v0.1

## 1. モジュール概要

AIControlChipは、Standardモデルに搭載される基本AI推論用プロセッサです。  
低消費・低コストを重視しながらも、簡易分類や環境認識などのTinyML処理を可能とします。  
本モジュールはAI専用ハードウェア（推論エンジン）と制御用マイコンブロックで構成されます。

---

## 2. 主な機能

- ニューラルネットワーク推論（量子化モデル対応）
- 推論対象：画像分類（簡易）、温度傾向認識、閾値学習など
- TinyML準拠モデルの読み込み・実行
- 入力データはセンサ制御チップまたは外部I/F経由で受信
- 出力は判定ラベルまたはアラート信号として出力可能

---

## 3. アーキテクチャ構成

| ブロック          | 内容                                             |
|-------------------|--------------------------------------------------|
| AI Engine Core    | 8-bit MAC ユニット × 64基、並列構成              |
| Local SRAM        | 128KB（モデル/中間データ格納用）                  |
| コントローラ      | TinyML推論管理、I/O制御                           |
| I/O Interface     | I2C or SPIによる外部通信                         |
| Power Domain      | クロックゲート機能付き省電力ブロック分離           |

---

## 4. 入出力インターフェース

| 種類         | 信号名       | 説明                              |
|--------------|--------------|-----------------------------------|
| データ入力   | IN_DATA      | センサデータ or 外部データ（SPI/I2C）|
| 推論開始     | INFER_START  | 推論動作トリガ                     |
| 判定出力     | OUT_LABEL    | 推論結果（1〜8カテゴリ）          |
| アラート出力 | AI_ALERT     | 閾値超過時などの通知              |
| 通信制御     | I2C_SCL/SDA or SPI_CS/CLK/MOSI/MISO |

---

## 5. 推論性能（目安）

| 項目                     | 値                              |
|--------------------------|---------------------------------|
| 処理対象                 | 8ビット量子化NNモデル           |
| 演算性能                 | 最大 10 GOPS                    |
| 1推論あたりの平均時間    | 約 5〜10ms（128×128入力時）     |
| 対応モデル形式           | TensorFlow Lite for Micro（TFLM）|
| 消費電力（動作時）        | 約 15〜25mW                     |

---

## 6. ブロック図（構想）

```
       +----------------------+
       |  AIControlChip Core  |
       +----------------------+
         |      ▲       ▲
         ▼      |       |
    [IN_DATA] [I2C/SPI] [INFER_START]
         |
         ▼
     TinyML Inference Engine
         |
         ▼
 [OUT_LABEL] / [AI_ALERT]
```

---

## 7. 実装メモ

- コア設計はVerilogベースで、演算ユニットはパイプライン対応
- 推論モデルは事前に変換・量子化（TensorFlow Lite）して格納
- SRAM容量によりモデルサイズは制限あり（64〜128KB推奨）

---

## 8. 検討課題

- 複数モデルの切替え制御（マルチモデル対応）
- 精度向上と演算コストのバランス
- 簡易GUIでのモデルアップロード対応

---

## 9. 関連資料

- [TinyMLモデル一覧.md]
- [AIコアアーキ構想図.vsdx]
- [推論性能ベンチマーク結果.xlsx]
