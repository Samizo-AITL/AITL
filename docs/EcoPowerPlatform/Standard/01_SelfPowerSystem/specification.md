# 01_SelfPowerSystem - 仕様書 v0.1

## 1. モジュール概要

SelfPowerSystemは、Standardモデルにおける主要な電源供給・管理モジュールです。  
USB給電またはバッテリ駆動のいずれにも対応し、システムの安定動作と省電力化を両立します。

---

## 2. 主な機能

- USB給電およびリチウムイオン電池による二重電源構成
- 電圧・電流監視による異常検出機能
- 電源切替（USB ↔ バッテリ）自動制御
- 過放電・過電流保護機能
- ソーラー充電対応（オプション）

---

## 3. 入出力インターフェース

| 種類         | 信号名        | 説明                           |
|--------------|---------------|--------------------------------|
| 電源入力     | USB_IN        | USB 5V 給電入力                 |
| 電源入力     | BAT_IN        | 3.7V リチウムイオン電池入力       |
| 電源出力     | SYS_VCC       | 3.3V レギュレート出力（最大500mA） |
| 信号出力     | BAT_LEVEL     | バッテリ残量のアナログ電圧出力      |
| 信号出力     | PWR_STATE     | 現在の電源ソース状態（USB/BAT）    |
| 制御信号     | I2C_SCL/SDA   | 電源制御用I2Cインタフェース       |

---

## 4. 電気的仕様

| 項目                     | 値                       |
|--------------------------|--------------------------|
| 出力電圧                 | 3.3V ±5%                 |
| 最大出力電流             | 500mA                    |
| USB入力電圧              | 5.0V（±0.25V）           |
| バッテリ対応             | Li-ion 3.7V, 1500mAh以上  |
| 電源切替しきい値         | USB電圧 < 4.5Vでバッテリ切替 |
| 動作温度範囲             | -20°C〜60°C              |

---

## 5. 機能ブロック図（構想）

```
[USB_IN]──┐
          │      ┌──────┐
          ├─────▶│ 電源切替 │───▶ [SYS_VCC]
[BAT_IN]──┘      └──────┘
                   │
              ┌────▼────┐
              │ 保護回路 │────▶ [BAT_LEVEL]
              └────────┘
```

---

## 6. 実装メモ

- 初期版は外付けPMIC（Power Management IC）を使用予定
- 将来的にオンチップ統合も検討
- バッテリ監視には簡易ADCまたはセンサICを使用

---

## 7. 検討課題

- ソーラー入力電圧の自動検出と切替
- 複数電源ソースの優先順位設定
- 効率的な省電力モード（スリープ制御）との連携

---

## 8. 関連資料

- [リチウムイオン保護回路IC技術資料.pdf]
- [I2C制御PMIC一覧.xlsx]
- [USB-PD対応ロードマップ.md]（将来展開）
